var url = require('url'),
	fs  = require('fs');

^L
asyncMode = true;
wwwPath = request.fsPath.replace(aspen.wwwPath, "");
fs.readdir(request.fsPath, function(err, readFiles) {
    files = readFiles;
    asyncCallback({files: files, wwwPath: wwwPath});
});
^L
<html>
    <head>
        <title>{{ simplate }}</title>
        <style>
            body {font-family: "Trebuchet MS", sans-serif;}
            table {font-family: monospace;}
            .dir {font-weight: bold;}
            .file {}
            td {padding: 0 1em 0 0; white-space: nowrap;}
            td.size {text-align: right;}
            th {text-align: left; white-space: nowrap;}
            tr:hover {background: #eef;}
            #footer {font-size: smaller; font-style: italic;}
        </style>
    </head>
    <body>
        <h1>{{ simplate }}</h1>
        <table>
            <tr>
                <th class="name">Name</th>
                <th>Size</th>
                <th>Last Modified</th>
            </tr>

            <tr>
                <td class="odd"><a href="../">../</a></td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
            </tr>

            <!-- Foreach -->
            {{#files}}
            <tr>
            <td><a href="{{wwwPath}}/{{.}}">{{.}}</a></td>
            </tr>
            {{/files}}

            <!-- End Foreach -->
        </table>
        <hr />
        <div id="footer">
            This index was brought to you by <a href="http://aspen.io/"> Aspen
                v{{ aspen.package.version }}</a>.
        </div>
    </body>
</html>
